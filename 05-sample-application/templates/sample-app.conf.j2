<VirtualHost *:{{ apache_port }}>
    ServerName {{ server_name }}
    ServerAdmin webmaster@localhost
    DocumentRoot {{ document_root }}

    # Security headers
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"

    <Directory {{ document_root }}>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted

        # Enable compression
        SetOutputFilter DEFLATE
    </Directory>

    # Logging
    ErrorLog ${APACHE_LOG_DIR}/{{ app_name }}_error.log
    CustomLog ${APACHE_LOG_DIR}/{{ app_name }}_access.log combined

    # MIME types
    <IfModule mod_mime.c>
        AddType text/css .css
        AddType application/javascript .js
    </IfModule>
</VirtualHost>